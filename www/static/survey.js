var mobile_off_flag=0;function reload_function(){location.reload()}function getLocationInfo(){$("#wait_image_visit_submit").show();$("#visit_submit").hide();$("#btn_location").hide();$("#checkLocation").html("");$("#checkLocationProfileUpdate").html("");$("#wait_image_visit_submit_doc").show();$("#visit_submit_doc").hide();$("#btn_location_doc").hide();$("#checkLocation_doc").html("");navigator.geolocation.getCurrentPosition(onSuccess,onError)}
function onSuccess(a){$("#lat").val(a.coords.latitude);$("#longitude").val(a.coords.longitude);$("#lat_p").val(a.coords.latitude);$("#long_p").val(a.coords.longitude);$("#errorChkVSubmit").html("");$("#errorConfiProfileUpdate").html("");$("#errorChkVSubmit_doc").html("");$("#checkLocation").html("Location Confirmed");$("#checkLocationProfileUpdate").html("Location Confirmed");$("#wait_image_visit_submit").hide();$("#visit_submit").show();$("#btn_location").hide();$("#checkLocation_doc").html("Location Confirmed");
$("#wait_image_visit_submit_doc").hide();$("#visit_submit_doc").show();$("#btn_location_doc").hide()}
function onError(a){$("#lat").val(0);$("#longitude").val(0);$("#lat_p").val(0);$("#long_p").val(0);$("#checkLocation").html("Location not found");$("#checkLocationProfileUpdate").html("Location not found");$("#wait_image_visit_submit").hide();$("#visit_submit").hide();$("#btn_location").show();$("#checkLocation_doc").html("Location not found");$("#wait_image_visit_submit_doc").hide();$("#visit_submit_doc").hide();$("#btn_location_doc").show()}
function set_confirm_page(){$("#wait_image_visit_submit").hide();$("#visit_submit").hide();$("#btn_location").show();$("#lat").val(0);$("#longitude").val(0);$("#lat_p").val(0);$("#long_p").val(0);$("#checkLocation").html("");$("#wait_image_visit_submit_doc").hide();$("#visit_submit_doc").hide();$("#btn_location_doc").show();$("#checkLocation_doc").html("")}function first_page(){$.mobile.navigate("YES"!=localStorage.synced?"#login":"#pageHome")}
function cancelVisitPage(){localStorage.visit_page="";mobile_off_flag=0;localStorage.visitMarketStr="";localStorage.visit_distributor_nameid="";localStorage.visit_type="";localStorage.scheduled_date="";localStorage.visit_client="";localStorage.productListStr="";localStorage.product_tbl_cart="";cancel_cart();localStorage.campaign_show_1="";localStorage.gift_show_1="";localStorage.ppm_show_1="";localStorage.sample_show_1="";localStorage.productGiftStr="";localStorage.campaign_doc_str="";localStorage.productSampleStr=
"";localStorage.productppmStr="";$(".visit_client").html("");set_doc_all();$.mobile.navigate("#pageHome")}
function set_doc_all(){$("#doc_campaign").html("");$("#doc_gift").html("");$("#doc_ppm").html("");$("#doc_sample").html("");$(".docCampaign").attr("checked",!1);$(".docSample").val("");$(".docGift").val("");$(".docPpm").val("");$("#doc_feedback").val("");$("#campaign_combo_id").val("");$("#gift_combo_id").val("");$("#ppm_combo_id").val("");$("#sample_combo_id").val("");$("#btn_location_doc").show();$("#visit_submit_doc").hide();$("#checkLocation_doc").html("");$("#wait_image_visit_submit_doc").hide("")}
function clear_autho(){"Yes"!=$("input[name='clear_auth_check']:checked").val()?$("#error_login").html("Required Confirm Clear"):(localStorage.base_url="",localStorage.photo_url="",localStorage.photo_submit_url="",localStorage.cid="",localStorage.user_id="",localStorage.user_pass="",localStorage.synccode="",localStorage.marketListStr="",localStorage.productListStr="",localStorage.product_tbl_cart="",localStorage.marchandizingItem="",localStorage.distributorListStr="",localStorage.synced="",localStorage.client_string=
"",localStorage.visit_client="",localStorage.client_string="",localStorage.visit_type="",localStorage.scheduled_date="",localStorage.visitMarketStr="",localStorage.visit_distributor_nameid="",localStorage.marchandizingStr="",localStorage.clientProfileStr="",localStorage.product_tbl_str="",localStorage.product_tbl_del_str="",localStorage.distributor_name="",localStorage.delivery_date="",localStorage.dis_client_string="",localStorage.plan_market="",localStorage.plan_date="",localStorage.m_plan_client_string=
"",localStorage.plan_ret_name="",localStorage.marketInfoStr="",localStorage.marketInfoSubmitStr="",localStorage.productOrderStr="",localStorage.marchandizingInfoStr="",localStorage.visit_plan_marketlist_combo="",localStorage.visit_plan_client_cmb_list="",localStorage.delivery_distributor_cmb_list="",localStorage.delivery_retailer_cmb_list="",localStorage.market_cmb_list_cp="",localStorage.unschedule_market_cmb_id="",localStorage.profile_m_client_org_id="",localStorage.campaign_string="",localStorage.visit_camp_list_str=
"",localStorage.visit_camp_submit_str="",localStorage.brand_list_string="",localStorage.visit_page="",localStorage.region_string="",localStorage.payment_mode="",localStorage.productGiftStr="",localStorage.campaign_doc_str="",localStorage.productSampleStr="",localStorage.productppmStr="",localStorage.campaign_show_1="",localStorage.gift_show_1="",localStorage.sample_show_1="",localStorage.ppm_show_1="",localStorage.productOrder_change="",localStorage.report_button="",localStorage.market_client="",
localStorage.menu="",localStorage.ppm_string="",localStorage.user_type="",localStorage.market_doctor="",$.mobile.navigate("#login"),location.reload())}function get_login(){$.mobile.navigate("#login")}
function check_user(){var a=$("#cid").val().toUpperCase(),a=$.trim(a),b="http://e2.businesssolutionapps.com/welcome/dmpath_live_20150502/get_path?CID="+a+"&HTTPPASS=e99business321cba",c=$("#user_id").val(),d=$("#user_pass").val(),c=$.trim(c),e="",g="";localStorage.base_url="";localStorage.photo_url="";localStorage.photo_submit_url="";localStorage.marketListStr="";localStorage.productListStr="";localStorage.product_tbl_cart="";localStorage.marchandizingItem="";localStorage.distributorListStr="";localStorage.client_string=
"";localStorage.visit_client="";localStorage.visit_type="";localStorage.scheduled_date="";localStorage.visitMarketStr="";localStorage.visit_distributor_nameid="";localStorage.marchandizingStr="";localStorage.clientProfileStr="";localStorage.product_tbl_str="";localStorage.product_tbl_del_str="";localStorage.distributor_name="";localStorage.delivery_date="";localStorage.dis_client_string="";localStorage.plan_market="";localStorage.plan_date="";localStorage.m_plan_client_string="";localStorage.plan_ret_name=
"";localStorage.marketInfoStr="";localStorage.marketInfoSubmitStr="";localStorage.productOrderStr="";localStorage.marchandizingInfoStr="";localStorage.visit_plan_marketlist_combo="";localStorage.visit_plan_client_cmb_list="";localStorage.delivery_distributor_cmb_list="";localStorage.delivery_retailer_cmb_list="";localStorage.market_cmb_list_cp="";localStorage.unschedule_market_cmb_id="";localStorage.profile_m_client_org_id="";localStorage.campaign_string="";localStorage.visit_camp_list_str="";localStorage.visit_camp_submit_str=
"";localStorage.brand_list_string="";localStorage.visit_page="";localStorage.region_string="";localStorage.payment_mode="";localStorage.productGiftStr="";localStorage.campaign_doc_str="";localStorage.productSampleStr="";localStorage.productppmtStr="";localStorage.market_client="";localStorage.menu="";localStorage.ppm_string="";localStorage.user_type="";localStorage.market_doctor="";localStorage.report_button="";localStorage.doctorreport_button="";localStorage.campaign_show_1="";localStorage.gift_show_1=
"";localStorage.sample_show_1="";localStorage.ppm_show_1="";""==c||void 0==c||""==d||void 0==d?($.mobile.navigate("#login"),$("#error_login").html("Required User ID and Password")):(localStorage.base_url="",localStorage.photo_url="",localStorage.photo_submit_url="",$("#loginButton").hide(),$("#wait_image_login").show(),$.ajax({type:"POST",url:b,success:function(b){if(""==b)$("#wait_image_login").hide(),$("#loginButton").show(),$("#error_login").html("Base URL not available");else{var h=b.indexOf("<start>"),
k=b.indexOf("<end>");b=b.substring(h+7,k).split("<fd>");3==b.length?(e=b[0],g=b[1],photo_submit_url=b[2],""==e||""==g?($("#wait_image_login").hide(),$("#loginButton").show(),$("#error_login").html("Base URL not available")):(clear_autho(),$("#error_login").html(""),$("#loginButton").hide(),$("#wait_image_login").show(),localStorage.base_url=e,localStorage.photo_url=g,localStorage.photo_submit_url=photo_submit_url,localStorage.cid=a,localStorage.user_id=c,localStorage.user_pass=d,localStorage.synced=
"NO",$.ajax({type:"POST",url:localStorage.base_url+"check_user?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode,success:function(a){if(""==a)$("#wait_image_login").hide(),$("#loginButton").show(),$("#error_login").html("Sorry Network not available");else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#wait_image_login").hide(),$("#loginButton").show(),$("#error_login").html(a[1]);else if("SUCCESS"==a[0]){localStorage.synccode=
a[1];localStorage.marketListStr=a[2];localStorage.productListStr=a[3];localStorage.marchandizingItem=a[4];localStorage.distributorListStr=a[5];localStorage.brand_list_string=a[6];localStorage.complain_type_string=a[7];localStorage.complain_from_string=a[8];localStorage.task_type_string=a[9];region_string=a[10];localStorage.gift_string=a[11];localStorage.clientCat_string=a[12];localStorage.market_client=a[13];localStorage.menu=a[14];localStorage.ppm_string=a[15];localStorage.user_type=a[16];localStorage.market_doctor=
a[17];var b=localStorage.menu.split("<rd>"),c=b.length,d="",e="No",g="No";for(a=0;a<c;a++){var f=b[a].split("<fd>"),h=f[0];"YES"==f[1]&&(d=d+'<a id="sub_button" data-role="button" style="height:100px;" onClick="'+h+'()" ><img style="padding-top:0px; padding-bottom:0px;" src="'+h+'.png"></a>',"chemist_visit"==h&&(e="Yes"),"doctor_visit"==h&&(g="Yes"))}localStorage.menu_list=d;$("#menu_show").empty();$("#menu_show").append(localStorage.menu_list).trigger("create");b=localStorage.productListStr.split("<rd>");
c=b.length;"Yes"==e&&(localStorage.report_button='<a data-role="button" onClick="s_order_summary_report();">Sales Call and Order Count</a><a data-role="button" onClick="s_order_detail_report();" >Sales Call and Order Detail</a>',$("#order_report_button").empty(),$("#order_report_button").append(localStorage.report_button).trigger("create"));"Yes"==g&&(localStorage.doctor_report_button='<a data-role="button" onClick="summary_report_doctor();" >DCR Count</a><a data-role="button" onClick="detail_report_doctor()" >DCR Detail</a>',
$("#doctor_report_button").empty(),$("#doctor_report_button").append(localStorage.doctor_report_button).trigger("create"));e='<ul id="campaign_combo_id_lv" data-role="listview"  data-filter="true" data-input="#campaign_combo_id" data-inset="true" data-filter-reveal="true" > ';g='<ul id="sample_combo_id_lv" data-role="listview"  data-filter="true" data-input="#sample_combo_id" data-inset="true" data-filter-reveal="true" > ';d='<ul id="item_combo_id_lv" data-role="listview" data-filter="true" data-input="#item_combo_id" data-inset="true" data-filter-reveal="true">';
for(a=0;a<c;a++)var k=b[a].split("<fd>"),f=k[0],h=k[1],k=k[2],d=d+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr style="border-bottom:1px solid #D2EEE9;"><td width="60px" style="text-align:center; padding-left:5px;"><input class="orderProduct" maxlength="4" onBlur="getOrderData_keyup(\''+f+'\')" type="number" id="order_qty'+f+'"  value="" placeholder="0" ><input type="hidden" id="order_id'+
f+'" value="'+f+'" ><input type="hidden" id="order_price'+f+'" value="'+k+'" ><input type="hidden" id="order_name'+f.toUpperCase()+'" value="'+h.toUpperCase()+'" placeholder="qty" ></td><td  style="text-align:left;"><font id="'+f+'" onClick="tr_item(\''+f+"')\" >"+h.toUpperCase()+"</font></td></tr></table></li>",e=e+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr style="border-bottom:1px solid #D2EEE9;"><td width="60px" style="text-align:center; padding-left:5px;"><input class="docCampaign" type="checkbox" onClick="getDocCampaignData_keyup(\''+
f+'\')" name="doc_camp'+f+'" value="checkbox" id="doc_camp'+f+'"><input type="hidden" id="doc_camp_id'+f+'" value="'+f+'" ><input type="hidden" id="doc_camp_price'+f+'" value="'+k+'" ><input type="hidden" id="doc_camp_name'+f.toUpperCase()+'" value="'+h.toUpperCase()+'" placeholder="qty" ></td><td  style="text-align:left;"><font id="'+f+'" onClick="tr_item_doc_campaign(\''+f+"')\" >"+h.toUpperCase()+"</font></td></tr></table></li>",g=g+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr style="border-bottom:1px solid #D2EEE9;"><td width="80px" style="text-align:center; padding-left:5px;"><input class="docSample" maxlength="4" onBlur="getSampleData_keyup(\''+
f+'\')" type="number" id="sample_qty'+f+'"  value="" placeholder="0" ><input type="hidden" id="sample_id'+f+'" value="'+f+'" ><input type="hidden" id="sample_price'+f+'" value="'+k+'" ><input type="hidden" id="sample_name'+f.toUpperCase()+'" value="'+h.toUpperCase()+'" placeholder="qty" ></td><td  style="text-align:left;">'+h.toUpperCase()+"</td></tr></table></li>";localStorage.product_tbl_str=d+"</ul>";localStorage.product_tbl_str_doc_campaign=e+"</ul>";localStorage.product_tbl_str_doc_sample=g+
"</ul>";$("#product_list_tbl").html(localStorage.product_tbl_str);$("#doctor_campaign_list_tbl").html(localStorage.product_tbl_str_doc_campaign);$("#doctor_sample_list_tbl").html(localStorage.product_tbl_str_doc_sample);if(5<localStorage.gift_string.length){e=localStorage.gift_string.split("<rd>");g=e.length;d='<ul id="gift_combo_id_lv" data-role="listview"  data-filter="true" data-input="#gift_combo_id" data-inset="true" >';for(a=0;a<g;a++)h=e[a].split("<fd>"),f=h[0],h=h[1],d=d+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr style="border-bottom:1px solid #D2EEE9;"><td width="80px" style="text-align:center; padding-left:5px;"><input type="hidden" id="gift_id'+
f+'" value="'+f+'" ><input class="docGift" maxlength="4" onBlur="getGiftData_keyup(\''+f+'\')" type="number" id="gift_qty'+f+'"  value="" placeholder="0" ><input type="hidden" id="doc_gift_name'+f.toUpperCase()+'" value="'+h.toUpperCase()+'" placeholder="qty" ></td><td  style="text-align:left;"><font id="'+h+'" onClick="tr_item_doc_campaign(\''+f+"')\" >"+h.toUpperCase()+"</font></td></tr></table></li>";localStorage.gift_tbl_doc=d+"</ul>";$("#doctor_gift_list_tbl").html(localStorage.gift_tbl_doc)}if(5<
localStorage.ppm_string.length){e=localStorage.ppm_string.split("<rd>");g=e.length;d='<ul id="ppm_combo_id_lv" data-role="listview"  data-filter="true" data-input="#ppm_combo_id" data-inset="true" >';for(a=0;a<g;a++)h=e[a].split("<fd>"),f=h[0],h=h[1],d=d+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr style="border-bottom:1px solid #D2EEE9;"><td width="80px" style="text-align:center; padding-left:5px;"><input type="hidden" id="ppm_id'+
f+'" value="'+f+'" ><input class="docPpm" maxlength="4" onBlur="getppmData_keyup(\''+f+'\')" type="number" id="ppm_qty'+f+'"  value="" placeholder="0" ><input type="hidden" id="doc_ppm_name'+f.toUpperCase()+'" value="'+h.toUpperCase()+'" placeholder="qty" ></td><td  style="text-align:left;"><font id="'+h+'" onClick="tr_item_doc_campaign(\''+f+"')\" >"+h.toUpperCase()+"</font></td></tr></table></li>";localStorage.ppm_tbl_doc=d+"</ul>";$("#doctor_ppm_list_tbl").html(localStorage.ppm_tbl_doc)}market_list_combo();
item_list_combo();mpo_list_combo();a='<table border="0" id="delevery_tbl" cellpadding="0" cellspacing="0" style="background-color:#F7F7F7; border-radius:5px;">';for(e=0;e<c;e++)d=b[e].split("<fd>"),g=d[0],d=d[1],a+='<tr  style="border-bottom:1px solid #D2EEE9;"><td width="40%" style="text-align:center; padding-left:5px;"><input type="number" id="delivery_qty'+g+'" value="" placeholder="0" ><input type="hidden" id="order_id'+g+'" value="'+g+'" ><input type="hidden" id="delivery_id'+g+'" value="'+g+
'" placeholder="qty" ><input type="hidden" id="delivery_name'+g+'" value="'+d+'" placeholder="qty" ></td><td width="60%" style="text-align:left;">&nbsp;&nbsp;'+d+"</td></tr>";localStorage.product_tbl_del_str=a+"</table>";a=localStorage.marketListStr.split("<rd>");b=a.length;g=e=c="";for(d=0;d<b;d++)f=a[d].split("<fd>"),planMarketID=f[0],planMarketName=f[1],marketID=planMarketID,marketName=planMarketName,f=planMarketName+"|"+planMarketID,""!=planMarketID&&(g+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a onClick="marketNextLV(\''+
f+"')\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+f+"</a></li>",c+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a onClick="visitPlanMarketNextLV(\''+f+"')\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+f+"</a></li>",e+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a onClick="marketNextCProfileLV(\''+
f+"')\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+f+"</a></li>");localStorage.visit_plan_marketlist_combo=c;localStorage.unschedule_market_cmb_id=g;localStorage.market_cmb_list_cp=e;client_catList();$("#error_login").html("");$("#wait_image_login").hide();$("#loginButton").show();localStorage.visit_page="";$("#se_mpo").val(localStorage.user_id);localStorage.synced="YES";$.mobile.navigate("#pageHome");set_doc_all()}else $("#wait_image_login").hide(),$("#loginButton").show(),$("#error_login").html("Network Timeout. Please try again.")},
error:function(a){$("#wait_image_login").hide();$("#loginButton").show();$("#error_login").html("Network Timeout. Please try again.");$.mobile.navigate("#login")}}))):($("#wait_image_login").hide(),$("#loginButton").show(),$("#error_login").html("Login Failed. Please Check CID, UserID, Password."))}},error:function(a){$("#wait_image_login").hide();$("#loginButton").show();$("#error_login").html("Network  Timeout. Please Check Internet Connection")}}))}
function getOtherOutlet(){if(1==mobile_off_flag)mobile_off_flag=0,$.mobile.navigate("#pageHome");else{var a=localStorage.visit_type;"Scheduled"==a?$.mobile.navigate("#page_scheduled"):"Unscheduled"==a&&$.mobile.navigate("#page_market_ret")}}function addMarketList(){$("#unschedule_market_combo_id").val("");var a=localStorage.unschedule_market_cmb_id,b=$("#unschedule_market_combo_id_lv");b.empty();b.append(a);$.mobile.navigate("#page_market");b.listview("refresh")}
function marketNextLV(a){$("#unschedule_market_combo_id").val(a);1==localStorage.doctor_flag?marketNext_doc():"rep"==localStorage.user_type?marketNext():marketNext_sup()}
function marketNext(){$("#unscheduled_m_client_combo_id").val("");market_name=$("#unschedule_market_combo_id").val();if(""==market_name||0==market_name)$("#err_market_next").text("Market required");else{$("#err_market_next").text("");$("#btn_unschedule_market").hide();$("#wait_image_unschedule_market").show();localStorage.visit_market_show=market_name;var a=market_name.split("|")[1],b=$("#catCombo").val();market_list=localStorage.market_client;if(-1==market_list.indexOf(a))$("#err_market_next").text("Sorry Network not available"),
$("#wait_image_unschedule_market").hide(),$("#btn_unschedule_market").show();else if(m_client_string=market_list.split("</"+a+">")[0].replace("<"+a+">",""),"Retailer not available"==m_client_string)$("#err_market_next").text("Retailer not available"),$("#wait_image_unschedule_market").hide(),$("#btn_unschedule_market").show();else{for(var c=m_client_string.split("<rd>"),d=c.length,a="",e=0;e<d;e++){var g=c[e].split("<fd>"),f=g[0],h=g[1],g=g[2];""!=f&&(""!=b?b==g&&(a+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a  onClick="marketRetailerNextLV(\''+
h+"|"+f+'\')"><font style="font-size:12px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+h+"|"+f+","+g+"</font></a></li>"):a+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a  onClick="marketRetailerNextLV(\''+h+"|"+f+'\')"><font style="font-size:12px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+h+"|"+f+","+g+"</font></a></li>")}b=$("#unscheduled_m_client_combo_id_lv");b.empty();b.append(a);$(".market").html(market_name);
$(".visit_type").html("Unscheduled");$(".s_date").html("");localStorage.visit_type="Unscheduled";localStorage.scheduled_date="";$("#err_market_next").text("");$("#wait_image_unschedule_market").hide();$("#btn_unschedule_market").show();$.mobile.navigate("#page_market_ret");b.listview("refresh")}}}
function marketNext_sup(){$("#unscheduled_m_client_combo_id").val("");market_name=$("#unschedule_market_combo_id").val();if(""==market_name||0==market_name)$("#err_market_next").text("Market required");else{$("#err_market_next").text("");$("#btn_unschedule_market").hide();$("#wait_image_unschedule_market").show();localStorage.visit_market_show=market_name;var a=market_name.split("|")[1],b=$("#catCombo").val();$.ajax({type:"POST",url:localStorage.base_url+"getMarketClientList?cid="+localStorage.cid+
"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&market_id="+a+"&catType="+b,success:function(a){if(""==a)$("#err_retailer_next").html("Sorry Network not available"),$("#btn_schedule_ret").show(),$("#wait_image_schedule_ret").hide();else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#err_market_next").text("Retailer not available"),$("#wait_image_unschedule_market").hide(),$("#btn_unschedule_market").show();else if("SUCCESS"==a[0]){localStorage.market_client=
a[1];var b=localStorage.market_client.split("<rd>"),e=b.length;a='<option value="0" > Select Retailer</option>';a="";for(var g=0;g<e;g++){var f=b[g].split("<fd>"),h=f[0],k=f[1];a+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a  onClick="marketRetailerNextLV(\''+k+"|"+h+'\')"><font style="font-size:12px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+k+"|"+h+","+f[2]+"</font></a></li>"}b=$("#unscheduled_m_client_combo_id");
b=$("#unscheduled_m_client_combo_id_lv");b.empty();b.append(a);$(".market").html(market_name);$(".visit_type").html("Unscheduled");$(".s_date").html("");localStorage.visit_type="Unscheduled";localStorage.scheduled_date="";$("#err_market_next").text("");$("#wait_image_unschedule_market").hide();$("#btn_unschedule_market").show();$.mobile.navigate("#page_market_ret");b.listview("refresh")}},error:function(a){$("#err_retailer_next").html("Sorry Network not available");$("#btn_schedule_ret").show();$("#wait_image_schedule_ret").hide()}})}}
function marketRetailerNextLV(a){$("#unscheduled_m_client_combo_id").val(a);1==localStorage.doctor_flag?marketRetailerNext_doc():marketRetailerNext()}
function marketRetailerNext(){$("#err_m_retailer_next").text("");visit_client=$("#unscheduled_m_client_combo_id").val();if(""==visit_client||0==visit_client)$("#err_m_retailer_next").text("Retailer required");else{$("#btn_unschedule_market_ret").hide();$("#wait_image_unschedule_market_ret").show();visitClientId_list=visit_client.split("|");visit_client.replace(visitClientId_list[0]+"|","");var a=visit_client.split("|")[1];localStorage.visit_client!=a&&cancel_cart();$(".visit_client").html(visit_client);
localStorage.visit_client_show=visit_client;localStorage.visit_client=visit_client.split("|")[1];localStorage.visit_page="YES";$("#err_m_retailer_next").text("");$("#wait_image_unschedule_market_ret").hide();$("#btn_unschedule_market_ret").show();$.mobile.navigate("#page_visit")}}function getOrder_load(){for(var a=localStorage.productOrderStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>");if(2==d.length){var e=d[1];$("#order_qty"+d[0]).val(e)}}}
function getOrder(){$("#errorChkVSubmit").html("");$.mobile.navigate("#page_order")}
function getOrderData_keyup(a){var b=$("#order_id"+a).val();$("#order_name"+a).val();var c=$("#order_qty"+a).val().replace(".","").substring(0,4);$("#order_qty"+a).val(c);var d=localStorage.productOrderStr;(1>eval(c)||0==c)&&$("#order_qty"+a).val("");if(""!=c&&0<eval(c))if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productOrderStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(h=h[0],h==b&&(product_index=d.indexOf(a),0==product_index&&
(d=d.replace(e[f]+"<rd>",""),d=d.replace(e[f],"")),0<product_index&&(d=d.replace("<rd>"+e[f],"")),d=""==d?b+"<fd>"+c:d+"<rd>"+h+"<fd>"+c))}else for(e=localStorage.productOrderStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(h=h[0],product_index=d.indexOf(a),h==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productOrderStr=d}
function getOrderData(){if(""!=localStorage.productOrderStr){cart_data();var a="#page_cart"}else a="#page_visit";$.mobile.navigate(a)}function visitSubmit(){1==localStorage.doctor_flag?visitSubmit_doc():lscVisitSubmit()}function replace_special_char(a){return a.replace(")","").replace("(","").replace("{","").replace("}","").replace("[","").replace("]","").replace('"',"").replace("'","").replace("/'","").replace("'","").replace(">","").replace("<","")}
function lscVisitSubmit(){$("#errorChkVSubmit").text("");visitClientId=localStorage.visit_client;visit_type=localStorage.visit_type;scheduled_date=localStorage.scheduled_date;marketInfoStr=localStorage.marketInfoSubmitStr;productOrderStr=localStorage.productOrderStr;marchandizingInfoStr=localStorage.marchandizingInfoStr;campaign_str=localStorage.visit_camp_submit_str;void 0==marketInfoStr&&(marketInfoStr="");void 0==productOrderStr&&(productOrderStr="");if(void 0==marchandizingInfoStr)marchandizingInfoStr=
"";else for(var a=marchandizingInfoStr.split("<rd>"),b=a.length,c="No",d=0;d<b;d++)if("Bad"==a[d].split("<fd>")[5]){c="Yes";break}void 0==campaign_str&&(campaign_str="");var e=$("#lscPhoto").val(),a=$("#lat").val(),b=$("#longitude").val(),g=$.now(),d=$("#chemist_feedback").val(),d=replace_special_char(d);localStorage.payment_mode=$("#payment_mode").val();"Yes"==c&&""==e?$("#errorChkVSubmit").html("Picture required, Because of Bad marchandizing"):(c=localStorage.user_id+"_"+g.toString()+".jpg",""==
a||0==a||""==b||0==b?($("#errorChkVSubmit").html("Location not Confirmed"),$("#btn_location").show(),$("#visit_submit").hide()):""==visitClientId||void 0==visitClientId?$("#errorChkVSubmit").html("Invalid Client"):""==visit_type||void 0==visit_type?$("#errorChkVSubmit").html("Invalid Visit Type"):($("#visit_submit").hide(),$("#wait_image_visit_submit").show(),$.ajax({type:"POST",url:localStorage.base_url+"visitSubmit?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+
"&synccode="+localStorage.synccode+"&client_id="+visitClientId+"&visit_type="+visit_type+"&schedule_date="+scheduled_date+"&market_info="+marketInfoStr+"&order_info="+productOrderStr+"&merchandizing="+marchandizingInfoStr+"&campaign="+campaign_str+"&lat="+a+"&long="+b+"&visit_photo="+c+"&payment_mode="+localStorage.payment_mode+"&chemist_feedback="+d,success:function(a){""==a?($("#errorChkVSubmit").html("Sorry Network not available"),$("#wait_image_visit_submit").hide(),$("#visit_submit").show()):
(a=a.split("<SYNCDATA>"),"FAILED"==a[0]?($("#errorChkVSubmit").html(a[1]),$("#wait_image_visit_submit").hide(),$("#visit_submit").show()):"SUCCESS"==a[0]?(localStorage.visit_client="",localStorage.marchandizingStr="",localStorage.marketInfoLSCStr="",localStorage.marketInfoStr="",localStorage.marketInfoSubmitStr="",localStorage.productOrderStr="",localStorage.marchandizingInfoStr="",localStorage.visit_camp_list_str="",localStorage.visit_camp_submit_str="",visitCampaginTempArray=[],visitCampaginArray=
[],localStorage.visit_page="",localStorage.show_total="",$("#chemist_feedback").val(""),localStorage.productOrderStr="",cancel_cart(),$(".visit_client").html(""),$("#errorChkVSubmit").html(""),$("#lat").val(""),$("#longitude").val(""),$("#lscPhoto").val(""),document.getElementById("myImage").src="",$("#lat_p").val(""),$("#long_p").val(""),$("#checkLocation").html(""),$("#checkLocationProfileUpdate").html(""),$("#wait_image_visit_submit").hide(),$("#visit_submit").show(),$("#product_total_last").html(""),
$("#product_list_tbl_cart").html(""),$("#product_total_cart").html(""),$("#item_combo_id").val("Search"),$("#visit_success").html("</br></br>Visit SL: "+a[1]+"</br>Submitted Successfully"),$("#btn_location").show(),$("#visit_submit").hide(),$("#checkLocation").hide(""),$.mobile.navigate("#page_confirm_visit_success")):($("#errorChkVSubmit").html("Network Timeout. Please try again."),$("#wait_image_visit_submit").hide(),$("#visit_submit").show()))},error:function(a){$("#errorChkVSubmit").html("Network Timeout. Please try again.");
$("#wait_image_visit_submit").hide();$("#visit_submit").show()}})))}function addMarketListCp(){$("#profile_market_cmb_id").val("");var a=localStorage.market_cmb_list_cp,b=$("#profile_market_cmb_id_lv");b.empty();b.append(a);$.mobile.navigate("#page_market_clprofile");b.listview("refresh")}function marketNextCProfileLV(a){$("#profile_market_cmb_id").val(a);marketNextCProfile()}
function marketNextCProfile(){$("#err_market_next_cp").html("");var a=$("#profile_market_cmb_id").val();if(""==a||0==a)$("#err_market_next_cp").text("Market required");else{$("#btn_profile_market").hide();$("#wait_image_profile_market").show();var b=a.split("|")[1],c=$("#catCombo_profile").val();market_list=localStorage.market_client;if(-1==market_list.indexOf(b))$("#err_market_next_cp").text("Sorry Network not available"),$("#wait_image_profile_market").hide();else if(m_client_string=market_list.split("</"+
b+">")[0].replace("<"+b+">",""),"Retailer not available"==m_client_string)$("#err_market_next_cp").text("Retailer not available"),$("#wait_image_profile_market").hide();else{for(var d=m_client_string.split("<rd>"),e=d.length,b="",g=0;g<e;g++){var f=d[g].split("<fd>"),h=f[0],k=f[1],f=f[2];""!=h&&(""!=c?c==f&&(b+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a  onClick="marketRetailerNextCProfileLV(\''+
k+"|"+h+'\')"><font style="font-size:12px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+k+"|"+h+","+f+"</font></a></li>"):b+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a  onClick="marketRetailerNextCProfileLV(\''+k+"|"+h+'\')"><font style="font-size:12px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+k+"|"+h+","+f+"</font></a></li>")}c=$("#profile_client_id_lv");c.empty();c.append(b);$(".market").html(a);$("#err_market_next_cp").html("");
$("#wait_image_profile_market").hide();$("#btn_profile_market").show();$.mobile.navigate("#page_market_ret_cprofile");c.listview("refresh")}}}function marketRetailerNextCProfileLV(a){$("#profile_client_id").val(a);marketRetailerNextCProfile()}
function marketRetailerNextCProfile(){$("#err_m_retailer_next_cp").text("");$("#err_profile_next_cp").html("");$("#errorConfirmProfileUpdate").html("");var a=$("#profile_client_id").val();""==a||0==a?$("#err_m_retailer_next_cp").text("Retailer required"):($("#btn_profile_market_ret").hide(),$("#wait_image_profile_market_ret").show(),localStorage.visit_client=a,profileClientId=localStorage.visit_client.split("|")[1],$.ajax({type:"POST",url:localStorage.base_url+"getClientProfile?cid="+localStorage.cid+
"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&client_id="+profileClientId,success:function(b){if(""==b)$("#err_m_retailer_next_cp").text("Sorry Network not available"),$("#wait_image_profile_market_ret").hide(),$("#btn_profile_market_ret").show();else if(b=b.split("<SYNCDATA>"),"FAILED"==b[0])$("#err_m_retailer_next_cp").html(b[1]),$("#wait_image_profile_market_ret").hide(),$("#btn_profile_market_ret").show();else if("SUCCESS"==b[0]){var c=
b[1],d=b[3],e=b[4],g=b[2].split("<fd>"),f=g.length;b="";for(var h=0;h<f;h++){var k=g[h];""!=k&&(b+='<option value="'+k+'" >'+k+"</option>")}$(".prof_market_class").html(c);$(".prof_distributor_class").html(e);$(".prof_retailer_class").html(a);g=d.split("<fd>");$("#cp_id").val(g[0]);$("#cp_name").val(g[1]);$("#cp_address").val(g[2]);$("#cp_marketid").val(g[3]);$("#cp_contact1").val(g[4]);$("#cp_contact2").val(g[5]);$("#cp_owner_name").val(g[6]);$("#cp_nid").val(g[7]);$("#cp_Passport").val(g[8]);$("#cp_dob").val(g[9]);
$("#cp_dom").val(g[10]);$("#cp_kidsinfo").val(g[11]);$("#cp_hobby").val(g[12]);h=g[13];$("#cp_trade_licence_no").val(g[14]);k=g[15];$("#cp_vat_reg_no").val(g[16]);$("#cp_manager_name").val(g[17]);$("#cp_manager_cont_no").val(g[18]);$("#cp_starting_year").val(g[19]);f=g[20];e=g[21];$("#cp_monthly_sales_capacity").val(g[22]);$("#cp_monthly_sales").val(g[23]);d=g[24];$("#cp_warehouse_capacity").val(g[25]);$("#cp_shop_size").val(g[26]);$("#cp_shop_front_size").val(g[27]);$("#cp_truck_number").val(g[28]);
$("#cp_barge_number").val(g[29]);c=g[30];g=g[31];document.getElementById("clientProfileImage").src=localStorage.photo_url+"client_pic/"+g;g=$("#cp_trade_license");g.empty();g.append('<option value="" >Select</option><option value="YES" >YES</option><option value="NO" >NO</option>');g.val(h);h=$("#cp_vat_registration");h.empty();h.append('<option value="" >Select</option><option value="YES" >YES</option><option value="NO" >NO</option>');h.val(k);k=$("#cp_Category");k.empty();k.append(b);k.val(f);b=
$("#cp_lsc_covered");b.empty();b.append('<option value="" >Select</option><option value="YES" >YES</option><option value="NO" >NO</option>');b.val(e);e=$("#cp_shop_rent_own");e.empty();e.append('<option value="" >Select</option><option value="Rented" >Rented</option><option value="Own" >Own</option>');e.val(d);d=$("#cp_status");d.empty();d.append('<option value="" >Select</option><option value="ACTIVE" >ACTIVE</option><option value="INACTIVE" >INACTIVE</option>');d.val(c);$("#wait_image_profile_market_ret").hide();
$("#btn_profile_market_ret").show();$("#err_m_retailer_next_cp").text("");$.mobile.navigate("#profile_update");g.selectmenu("refresh");h.selectmenu("refresh");k.selectmenu("refresh");b.selectmenu("refresh");e.selectmenu("refresh");d.selectmenu("refresh")}else $("#err_m_retailer_next_cp").html("Network Timeout. Please try again."),$("#wait_image_profile_market_ret").hide(),$("#btn_profile_market_ret").show()},error:function(a){$("#err_m_retailer_next_cp").html("Network Timeout. Please try again.");
$("#wait_image_profile_market_ret").hide();$("#btn_profile_market_ret").show()}}))}var clientUpdateStr="";
function prifileInfoNext(){$("#err_profile_next_cp").html("");$("#errorConfirmProfileUpdate").html("");$("#checkLocation").html("");$("#checkLocationProfileUpdate").html("");clientUpdateStr="";var a=$("#cp_id").val(),b=$("#cp_name").val(),b=$("#cp_name").val(),b=b.replace("&"," and "),c=$("#cp_address").val(),c=c.replace("&"," and "),d=$("#cp_marketid").val(),e=$("#cp_contact1").val(),g=$("#cp_contact2").val(),f=$("#cp_owner_name").val(),h=$("#cp_nid").val(),k=$("#cp_Passport").val(),l=$("#cp_dob").val(),
m=$("#cp_dom").val(),p=$("#cp_kidsinfo").val(),q=$("#cp_hobby").val(),r=$("#cp_trade_license").val(),t=$("#cp_trade_licence_no").val(),u=$("#cp_vat_registration").val(),v=$("#cp_vat_reg_no").val(),w=$("#cp_manager_name").val(),x=$("#cp_manager_cont_no").val(),y=$("#cp_starting_year").val(),z=$("#cp_Category").val(),A=$("#cp_lsc_covered").val(),B=$("#cp_monthly_sales_capacity").val(),C=$("#cp_monthly_sales").val(),n=$("#cp_shop_rent_own").val(),D=$("#cp_warehouse_capacity").val(),E=$("#cp_shop_size").val(),
F=$("#cp_shop_front_size").val(),G=$("#cp_truck_number").val(),H=$("#cp_barge_number").val(),I=$("#cp_status").val();""==a||""==b||""==d||""==e||""==f||""==n?$("#err_profile_next_cp").html("Important Value Required"):(clientUpdateStr=a+"<fd>"+b+"<fd>"+c+"<fd>"+d+"<fd>"+e+"<fd>"+g+"<fd>"+f+"<fd>"+h+"<fd>"+k+"<fd>"+l+"<fd>"+m+"<fd>"+p+"<fd>"+q+"<fd>"+r+"<fd>"+t+"<fd>"+u+"<fd>"+v+"<fd>"+w+"<fd>"+x+"<fd>"+y+"<fd>"+z+"<fd>"+A+"<fd>"+B+"<fd>"+C+"<fd>"+n+"<fd>"+D+"<fd>"+E+"<fd>"+F+"<fd>"+G+"<fd>"+H+"<fd>"+
I,$.mobile.navigate("#page_confirm_profile_update"))}
function lscProfileSubmit(){$("#errorConfirmProfileUpdate").html("");var a=$("#lat_p").val(),b=$("#long_p").val(),c=$("#cp_id").val();$("#lscPhotoProfile").val();c+=".jpg";""==a||0==a||""==b||0==b?$("#errorConfirmProfileUpdate").html("Location not Confirmed"):""==clientUpdateStr?$("#errorConfirmProfileUpdate").html("Data not available"):($("#btn_profile_update").hide(),$("#wait_image_profile_update").show(),$.ajax({type:"POST",url:localStorage.base_url+"updateClientProfile?cid="+localStorage.cid+
"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&client_data="+encodeURI(clientUpdateStr)+"&lat="+a+"&long="+b+"&profile_photo="+c+"&profile_photo_str=abc",success:function(a){""==a?($("#errorConfirmProfileUpdate").html("Sorry Network not available"),$("#wait_image_profile_update").hide(),$("#btn_profile_update").show()):(a=a.split("<SYNCDATA>"),"FAILED"==a[0]?($("#wait_image_profile_update").hide(),$("#btn_profile_update").show()):"SUCCESS"==
a[0]?(clientUpdateStr="",$("#lat_p").val(""),$("#long_p").val(""),$("#lscPhotoProfile").val(""),document.getElementById("myImageProfile").src="",$("#lat").val(""),$("#longitude").val(""),$(".prof_market_class").html(""),$(".prof_distributor_class").html(""),$(".prof_retailer_class").html(""),$("#wait_image_profile_update").hide(),$("#btn_profile_update").show(),$.mobile.navigate("#page_profile_update_success")):($("#errorConfirmProfileUpdate").html("Network Timeout. Please try again."),$("#wait_image_profile_update").hide(),
$("#btn_profile_update").show()))},error:function(a){$("#wait_image_profile_update").hide();$("#btn_profile_update").show()}}))}function getVisitReportPage(){$("#err_visit_rpt").html("");$("#wait_image_visit_report").hide();$("#tbl_visit_rpt_show_campaign").empty();$("#tbl_visit_rpt_show_stock").empty();$("#tbl_visit_rpt_show_sales").empty();$("#ChartDivRetStock").empty();$("#retailerStock").val("");$.mobile.navigate("#page_visit_rpt")}
function visitReport(){$("#err_visit_rpt").html("");$("#wait_image_visit_report").show();$("#tbl_visit_rpt_show_campaign").empty();$("#tbl_visit_rpt_show_stock").empty();$("#tbl_visit_rpt_show_sales").empty();$("#ChartDivRetStock").empty();$("#retailerStock").val("");visit_client=localStorage.visit_client;clientId=visit_client.split("-")[1];$.ajax({type:"POST",url:localStorage.base_url+"getVisitReport?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+
localStorage.synccode+"&client_id="+clientId,success:function(a){if(""==a)$("#err_visit_rpt").html("Sorry Network not available"),$("#wait_image_visit_report").hide();else{var b=a.split("<SYNCDATA>");if("FAILED"==b[0])$("#err_visit_rpt").html(b[1]),$("#wait_image_visit_report").hide();else if("SUCCESS"==b[0]){$("#wait_image_visit_report").hide();a=b[1];var c=b[2],d=b[3],b=eval(b[4]),e;e='<tr ><td colspan="2" ><b>LSC Sales:</b></td></tr><tr style="font-weight:bold; text-shadow:none; color:#408080;" ><td >Month</td><td >Qty</td></tr>';
var g=b.length;for(i=0;i<g;i++){var f=b[i];e+='<tr style="font-size:11px;"><td >'+f.Month+"</td><td >"+f.Qty+"</td></tr>"}$("#tbl_visit_rpt_show_campaign").append(a).trigger("create");$("#tbl_visit_rpt_show_stock").append(c).trigger("create");$("#retailerStock").val(d);$("#tbl_visit_rpt_show_sales").append(e).trigger("create");loadChart()}else $("#err_visit_rpt").html("Network Timeout. Please try again."),$("#wait_image_visit_report").hide()}},error:function(a){$("#err_visit_rpt").html("Network Timeout. Please try again.");
$("#wait_image_visit_report").hide()}})}
function getComplain(){$("#error_complain").text("");for(var a=localStorage.complain_type_string.split("<rd>"),b=a.length,c='<option value="0" > Select Type</option>',d=0;d<b;d++){var e=a[d];""!=e&&(c+='<option value="'+e+'" >'+e+"</option>")}a=$("#complain_type_id");a.empty();a.append(c);a[0].selectedIndex=0;$("#complain_ref").val("");$("#complain_details").val("");$.mobile.navigate("#page_complain_new");complain_from_id_ob.selectmenu("refresh");a.selectmenu("refresh")}
function complainSubmit(){$("#error_complain").html("");var a=$("#complain_ref").val(),b=$("#complain_type_id").val(),c=$("#complain_details").val();""==a||0==a?$("#error_complain").html("Reference Required"):""==b||0==b?$("#error_complain").html("Complain Type Required"):($("#btn_complain_submit").hide(),$("#wait_image_complain_submit").show(),$.ajax({type:"POST",url:localStorage.base_url+"complainSubmit?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+
localStorage.synccode+"&complain_from= &complain_ref="+a+"&complain_type="+b+"&complain_details="+c,success:function(a){""==a?($("#err_visit_rpt").html("Sorry Network not available"),$("#wait_image_complain_submit").hide(),$("#btn_complain_submit").show()):(a=a.split("<SYNCDATA>"),"FAILED"==a[0]?($("#error_complain").html(a[1]),$("#wait_image_complain_submit").hide(),$("#btn_complain_submit").show()):"SUCCESS"==a[0]?($("#wait_image_complain_submit").hide(),$("#btn_complain_submit").show(),$.mobile.navigate("#page_complain_success")):
($("#error_complain").html("Network Timeout. Please try again."),$("#wait_image_complain_submit").hide(),$("#btn_complain_submit").show()))},error:function(a){$("#error_complain").html("Network Timeout. Please try again.");$("#wait_image_complain_submit").hide();$("#btn_complain_submit").show()}}))}
function showComplain(){$("#error_complain_page").html("");$("#tbl_show_complain").empty();$.ajax({type:"POST",url:localStorage.base_url+"showComplain?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode,success:function(a){""==a?$("#error_complain_page").html("Sorry Network not available"):(a=a.split("<SYNCDATA>"),"FAILED"==a[0]?$("#error_complain_page").html(a[1]):"SUCCESS"==a[0]?(a=a[1],$("#tbl_show_complain").append(a).trigger("create"),
$.mobile.navigate("#page_complain_show")):$("#error_complain_page").html("Network Timeout. Please try again."))},error:function(a){$("#error_complain_page").html("Network Timeout. Please try again.")}})}
function showTask(){$("#error_task_page").html("");$("#wait_image_task_submit").hide();$("#tbl_show_task").empty();$.ajax({type:"POST",url:localStorage.base_url+"showTask?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode,success:function(a){""==a?$("#error_task_page").html("Sorry Network not available"):(a=a.split("<SYNCDATA>"),"FAILED"==a[0]?$("#error_task_page").html(a[1]):"SUCCESS"==a[0]?(a=a[1],$("#tbl_show_task").append(a).trigger("create"),
$.mobile.navigate("#page_task_show")):$("#error_task_page").html("Network Timeout. Please try again."))},error:function(a){$("#error_task_page").html("Network Timeout. Please try again.")}})}
function updateTask(a){$("#error_task_list").html("");$("#btn_task_update"+a).hide();$("#wait_image_task_submit").show();$("#tbl_show_task").empty();$.ajax({type:"POST",url:localStorage.base_url+"showTask?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&action=Update&rowid="+a,success:function(b){""==b?($("#error_task_list").html("Sorry Network not available"),$("#btn_task_update"+a).show(),$("#wait_image_task_submit").hide()):
(b=b.split("<SYNCDATA>"),"FAILED"==b[0]?($("#error_task_list").html(b[1]),$("#btn_task_update"+a).show(),$("#wait_image_task_submit").hide()):"SUCCESS"==b[0]?(b=b[1],$("#wait_image_task_submit").hide(),$("#tbl_show_task").append(b).trigger("create"),$.mobile.navigate("#page_task_show")):($("#error_task_list").html("Network Timeout. Please try again."),$("#btn_task_update"+a).show(),$("#wait_image_task_submit").hide()))},error:function(b){$("#error_task_list").html("Network Timeout. Please try again.");
$("#btn_task_update"+a).show();$("#wait_image_task_submit").hide()}})}function exit(){navigator.app.exitApp()}
function marketNextCProfile_map(){$("#err_m_retailer_next_cp").html("");var a=$("#profile_market_cmb_id").val();""==a||0==a?$("#err_m_retailer_next_cp").text("Market required"):($("#wait_image_profile_market_ret").show(),a=a.split("-")[1],$.ajax({type:"POST",url:localStorage.base_url+"getMarketClientListMap?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&market_id="+a,success:function(a){""==a?($("#err_m_retailer_next_cp").html("Sorry Network not available"),
$("#wait_image_profile_market_ret").hide()):(a=a.split("<SYNCDATA>"),"FAILED"==a[0]?($("#err_m_retailer_next_cp").html(a[1]),$("#wait_image_profile_market_ret").hide()):"SUCCESS"==a[0]&&(a=a[1].split("<fdfd>"),localStorage.map_desc=a[0],localStorage.c_point=a[1],$("#desc").val(localStorage.map_desc),$("#c_point").val(localStorage.c_point),initialize(),google.maps.event.addDomListener(window,"load",initialize),$("#err_m_retailer_next_cp").html(""),$("#wait_image_profile_market_ret").hide(),$.mobile.navigate("#page_market_ret_cprofile_map")))},
error:function(a){$("#err_m_retailer_next_cp").html("Network Timeout. Please try again.");$("#wait_image_profile_market_ret").hide()}}))}
function initialize(){var a=$("#c_point").val().split(","),a=new google.maps.LatLng(parseFloat(a[0]),parseFloat(a[1])),b={zoom:12,center:a},c=new google.maps.Map(document.getElementById("map-canvas"),b),d;d=new google.maps.Marker({position:a,map:c,title:"Outlet",icon:"lafarge_g.png"});var e=$("#desc").val(),a=e.split("rdrd"),b=e.split("rdrd").length,g=[];for(d=d=0;d<b;d++){for(var f=0,h=a[d].split(","),k=a[d].split(",").length,l=[],f=0;f<k;f++)l.push(h[f]);g.push(l)}for(var m=new google.maps.InfoWindow,
b="lafarge_g.png",a=0;a<g.length;a++){d=g[a][1]+","+g[a][2];f=e.split("rdrd");h=e.split("rdrd").length;show_info="";for(k=0;k<h;k++)-1!=f[k].search(d)&&(b=f[k].split(","),show_info=""==show_info?'<div  style="height:300px; width:700px">'+b[k][0]+"</div>":show_info+'<div style="background-color:#408080; height:2px"></div><div  style="height:300px; width:700px">'+b[k][0]+"</div>",b="lafarge_g.png");d=new google.maps.Marker({position:new google.maps.LatLng(g[a][1],g[a][2]),map:c,icon:b});google.maps.event.addListener(d,
"click",function(a,b){return function(){var d=g[b][1]+","+g[b][2],f=e.split("rdrd"),h=e.split("rdrd").length;show_info="";for(var k=0;k<h;k++)-1!=f[k].search(d)&&(f[k].split(","),show_info=""==show_info?'<div  style="height:auto; width:auto">'+g[b][0]+"</div>":show_info+'<div style="background-color:#408080; height:2px"></div><div  style="height:300px; width:700px">'+g[b][0]+"</div>");m.setContent(show_info);m.open(c,a)}}(d,a))}}
function search_item(){vfinal=$("#item_search").val().toUpperCase();for(var a=localStorage.productListStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>"),e=d[0];if(0==d[1].indexOf(vfinal)){jQuery("#order_qty"+e).focus().select();$("#item_search").val("");break}}}
function cart_data(){if(0<localStorage.productOrderStr.length){for(var a=localStorage.productOrderStr.split("<rd>"),b=a.length,c='<ul  data-role="listview">',d=0,e=0;e<b;e++){var g=a[e].split("<fd>");if(2==g.length)var f=g[0],g=g[1],h=$("#order_name"+f).val(),k=$("#order_price"+f).val(),k=parseFloat(k)*parseFloat(g),d=d+k,c=c+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr style="border-bottom:1px solid #D2EEE9;"><td width="60px" style="text-align:center; padding-left:5px;"><input  type="number" id="cart_qty'+
f+'"  onBlur="getCartData_keyup(\''+f+'\')" value="'+g+'" placeholder="0"> </td><td  style="text-align:left;">'+h.toUpperCase()+"</td></tr></table></li>"}localStorage.product_tbl_cart=c+"</ul>";localStorage.total_value=d.toFixed(2);$("#product_list_tbl_cart").empty();$("#product_list_tbl_cart").append(localStorage.product_tbl_cart).trigger("create");localStorage.show_total="Total Order Amount: "+localStorage.total_value+" BDT";$("#product_total_cart").html(localStorage.show_total);$("#product_total_last").html(localStorage.show_total);
$("#order_total_show").html(localStorage.show_total)}else $.mobile.navigate("#page_order")}
function getCartData_keyup(a){var b=$("#order_id"+a).val();$("#order_name"+a).val();var c=$("#cart_qty"+a).val().replace(".","").substring(0,4);$("#cart_qty"+a).val(c);$("#order_qty"+a).val(c);var d=localStorage.productOrderStr;(1>eval(c)||0==c)&&$("#order_qty"+a).val("");if(""!=c&&0<eval(c)){if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productOrderStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");if(2==h.length){var k=h[0],h=h[1];k==b&&(product_index=
d.indexOf(a),0==product_index&&(d=0<d.indexOf("<rd>")?d.replace(e[f]+"<rd>",""):d.replace(e[f],"")),0<product_index&&(d=d.replace("<rd>"+e[f],"")),d=""==d?b+"<fd>"+c:d+"<rd>"+k+"<fd>"+c)}}localStorage.productOrderStr=d}else for(e=localStorage.productOrderStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(k=h[0],product_index=d.indexOf(a),k==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));
localStorage.productOrderStr=d;if(0<localStorage.productOrderStr.length){e=localStorage.productOrderStr.split("<rd>");g=e.length;for(f=a=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(k=h[0],h=h[1],k=$("#order_price"+k).val(),k=parseFloat(k)*parseFloat(h),a+=k);localStorage.total_value=a.toFixed(2);$("#product_total_cart").html("Total Order Amount: "+localStorage.total_value+" BDT");$("#product_total_last").html("Total Order Amount: "+localStorage.total_value+" BDT")}}
function payment_mode(){var a=$("input:radio[name='payment_mode']:checked").val();$.mobile.navigate("#page_visit");localStorage.payment_mode=a}function cancel_cart(){$(".orderProduct").val("");$("#product_total_cart").html("");$("#product_total_last").html("");$("#order_total_show").html("");$("#chemist_feedback").val("");$("#item_combo_id").val("");localStorage.productOrderStr="";$("#product_list_tbl_cart").html("");$.mobile.navigate("#page_visit")}
function marketNext_doc(){$("#unscheduled_m_client_combo_id").val("");market_name=$("#unschedule_market_combo_id").val();localStorage.visit_market_show=market_name;if(""==market_name||0==market_name)$("#err_market_next").text("Market required");else{$("#err_market_next").text("");$("#btn_unschedule_market").hide();$("#wait_image_unschedule_market").show();var a=market_name.split("|")[1];result=localStorage.market_doctor;a=result.split("</"+a+">")[0].split("<"+a+">")[1];if(""==result)$("#err_market_next").text("Sorry Network not available"),
$("#wait_image_unschedule_market").hide(),$("#btn_unschedule_market").show();else if(void 0==a||"undefined"==a)$("#err_market_next").text("Doctor not available"),$("#wait_image_unschedule_market").hide(),$("#btn_unschedule_market").show();else{for(var b=a.split("<rd>"),c=b.length,a="",d=0;d<c;d++){var e=b[d].split("<fd>"),g=e[0],e=e[1];""!=g&&(a+='<li class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location" style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><a onClick="marketRetailerNextLV(\''+
e+"|"+g+"')\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+e+"|"+g+"</a></li>")}b=$("#unscheduled_m_client_combo_id");b=$("#unscheduled_m_client_combo_id_lv");b.empty();b.append(a);$(".market").html(market_name);$(".visit_type").html("Unscheduled");$(".s_date").html("");localStorage.visit_type="Unscheduled";localStorage.scheduled_date="";$("#err_market_next").text("");$("#wait_image_unschedule_market").hide();$("#btn_unschedule_market").show();$.mobile.navigate("#page_market_ret");b.listview("refresh")}}}
function marketRetailerNext_doc(){$("#err_m_retailer_next").text("");visit_client=$("#unscheduled_m_client_combo_id").val();""==visit_client||0==visit_client?$("#err_m_retailer_next").text("Retailer required"):($("#btn_unschedule_market_ret").hide(),$("#unscheduled_m_client_combo_id_lv").hide(),$("#wait_image_ret").show(),$(".visit_client").html(visit_client),localStorage.visit_client_show=visit_client,visit_client!=localStorage.visit_client&&(localStorage.productGiftStr="",localStorage.campaign_doc_str=
"",localStorage.productSampleStr="",localStorage.productppmStr="",localStorage.campaign_show_1="",localStorage.gift_show_1="",localStorage.sample_show_1="",localStorage.ppm_show_1="",set_doc_all()),localStorage.visit_client=visit_client,localStorage.visit_page="YES",$("#wait_image_unschedule_market_ret").hide(),$("#unscheduled_m_client_combo_id_lv").show(),$("#wait_image_ret").hide(),$.mobile.navigate("#page_visit_doc"))}
function getCampaign(){localStorage.campaign=1;if(void 0==localStorage.campaign_doc_str||"undefined"==localStorage.campaign_doc_str)localStorage.campaign_doc_str="";for(var a=localStorage.campaign_doc_str.split("<rd>"),b=a.length,c=0;c<b;c++)$("#doc_camp"+a[c]).attr("checked",!0);$.mobile.navigate("#page_doctor_campaign")}
function search_item_doctor_campaign(){vfinal=$("#item_search_doctor_campaign").val().toUpperCase();for(var a=localStorage.productListStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>"),e=d[0];if(0==d[1].indexOf(vfinal)){jQuery("#doc_camp"+e).focus().select();$("#item_search_doctor_campaign").val("");break}}}
function getDocCampaignData_keyup(a){var b=$("#doc_camp_id"+a).val(),c=$("#doc_camp_name"+a).val(),d=$("#doc_camp"+a).is(":checked");a=localStorage.campaign_doc_str;if(1==d)if(-1==a.indexOf(b))""==a?(a=b,productOrderShowStr=c):a=a+"<rd>"+b;else for(var c=localStorage.campaign_doc_str.split("<rd>"),d=c.length,e=0;e<orderProductLength;e++){var g=c[e];g==b&&(a=a.replace(g,""),a=""==a?b:a+"<rd>"+g)}else for(c=localStorage.campaign_doc_str.split("<rd>"),d=c.length,e=0;e<d;e++)g=c[e],product_index=a.indexOf(g),
g==b&&(1<d&&(0==product_index&&(a=a.replace(c[e]+"<rd>","")),0<product_index&&(a=a.replace("<rd>"+c[e],""))),1==d&&(a=a.replace(c[e],"")));localStorage.campaign_doc_str=a}
function campaign_remove(a){for(var b=localStorage.campaign_doc_str,c=b.split("<rd>").length,d=0;d<c;d++)b=0==d?b.replace(a,""):b.replace("<rd>"+a,"");localStorage.campaign_doc_str=b;$("#"+a).remove();$("#doc_camp"+a).attr("checked",!1);-1==campaign_show_1.indexOf("undefined")&&(a=$("#doc_campaign").html(),localStorage.campaign_show_1=a)}
function getDocCampaignData(){for(var a=localStorage.campaign_doc_str.split("<rd>"),b=a.length,c="",d=0;d<b;d++){0==d&&(c+='<table width="100%" cellspacing="2" border="0" style="border:thin;  border-color:a;background-color:#F7F7F7">');var e=$("#doc_camp_name"+a[d]).val();""!=a[d]&&(c=c+' <tr id="'+a[d]+'"><td>'+e+"("+a[d]+') </td><td> <a data-role="button" class="ui-btn" style="text-align:center" onClick="campaign_remove(\''+a[d]+"');\" > X </a> </td></tr>")}""!=c&&(c+="</table>");localStorage.campaign_show_1=
c;0<c.length&&$("#doc_campaign").html("</br>"+localStorage.campaign_show_1+"</br>");campaign_as_sample();$.mobile.navigate("#page_visit_doc")}function campaign_as_sample(){for(var a=(localStorage.campaign_doc_str+"<rd>").split("<rd>"),b=a.length,c=localStorage.productSampleStr,c=localStorage.productSampleStr,d=0;d<b;d++)0!=a[d].length&&-1==c.indexOf(a[d])&&($("#sample_qty"+a[d]).val(0),c=c+"<rd>"+a[d]+"<fd>0");localStorage.productSampleStr=c;getDocSampleData()}
function getDoctorGift(){if(void 0==localStorage.gift_tbl_doc||"undefined"==localStorage.gift_tbl_doc)localStorage.gift_tbl_doc="";for(var a=localStorage.productGiftStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>");$("#gift_qty"+d[0]).val(d[1])}$.mobile.navigate("#page_doctor_gift")}
function getGiftData_keyup(a){var b=$("#gift_id"+a).val();$("#doc_gift_name"+a).val();var c=$("#gift_qty"+a).val().replace(".","").substring(0,4);$("#gift_qty"+a).val(c);var d=localStorage.productGiftStr;(1>eval(c)||0==c)&&$("#gift_qty"+a).val("");if(""!=c&&0<eval(c))if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productGiftStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(a=h[0],h=h[1],a==b&&(d=d.replace(e[f],""),d=""==d?b+"<fd>"+
c:d+"<rd>"+a+"<fd>"+h))}else for(e=localStorage.productGiftStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(product_index=d.indexOf(a),orderProductId==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productGiftStr=d}
function getDocGiftData(){for(var a=localStorage.productGiftStr.split("<rd>"),b=a.length,c='<ul  data-role="listview">',d=0;d<b;d++)var e=a[d].split("<fd>"),g=$("#doc_gift_name"+e[0]).val(),c=c+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr><td  >'+g+"("+e[0]+')</td><td width="80px"><input  type="number" id="g_cart_qty'+e[0]+'"  onBlur="giftCartData_keyup(\''+
e[0]+'\');" value="'+e[1]+'" placeholder="0"></td></tr></table></li>';""!=c&&(c+="</ul>");localStorage.gift_show_1=c;-1==c.indexOf("undefined")&&($("#doc_gift").empty(),$("#doc_gift").append("</br>"+localStorage.gift_show_1+"</br>").trigger("create"));$.mobile.navigate("#page_visit_doc")}
function giftCartData_keyup(a){var b=$("#gift_id"+a).val();$("#doc_gift_name"+a).val();var c=$("#g_cart_qty"+a).val();$("#gift_qty"+a).val(c);var d=localStorage.productGiftStr;(1>eval(c)||0==c)&&$("#gift_qty"+a).val("");if(""!=c&&0<eval(c)){if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productGiftStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(h=h[0],h==b&&(product_index=d.indexOf(a),0==product_index&&(d=d.replace(e[f]+"<rd>",
""),d=d.replace(e[f],"")),0<product_index&&(d=d.replace("<rd>"+e[f],"")),d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c))}localStorage.productGiftStr=d}else for(e=localStorage.productGiftStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(h=h[0],product_index=d.indexOf(a),h==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productGiftStr=d}
function getDoctorppm(){if(void 0==localStorage.ppm_tbl_doc||"undefined"==localStorage.ppm_tbl_doc)localStorage.ppm_tbl_doc="";for(var a=localStorage.productppmStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>");$("#ppm_qty"+d[0]).val(d[1])}$.mobile.navigate("#page_doctor_ppm")}
function getppmData_keyup(a){var b=$("#ppm_id"+a).val();$("#doc_ppm_name"+a).val();var c=$("#ppm_qty"+a).val().replace(".","").substring(0,4);$("#ppm_qty"+a).val(c);var d=localStorage.productppmStr;(1>eval(c)||0==c)&&$("#ppm_qty"+a).val("");if(""!=c&&0<eval(c))if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productppmStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(a=h[0],h=h[1],a==b&&(d=d.replace(e[f],""),d=""==d?b+"<fd>"+c:d+
"<rd>"+a+"<fd>"+h))}else for(e=localStorage.productppmStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(product_index=d.indexOf(a),orderProductId==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productppmStr=d}
function getDocppmData(){for(var a=localStorage.productppmStr.split("<rd>"),b=a.length,c='<ul  data-role="listview">',d=0;d<b;d++)var e=a[d].split("<fd>"),g=$("#doc_ppm_name"+e[0]).val(),c=c+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr><td  >'+g+"("+e[0]+')</td><td width="80px"><input  type="number" id="g_cart_qty'+e[0]+'"  onBlur="ppmCartData_keyup(\''+
e[0]+'\');" value="'+e[1]+'" placeholder="0"></td></tr></table></li>';""!=c&&(c+="</ul>");localStorage.ppm_show_1=c;-1==c.indexOf("undefined")&&($("#doc_ppm").empty(),$("#doc_ppm").append("</br>"+localStorage.ppm_show_1+"</br>").trigger("create"));$.mobile.navigate("#page_visit_doc")}
function ppmCartData_keyup(a){var b=$("#ppm_id"+a).val();$("#doc_ppm_name"+a).val();var c=$("#g_cart_qty"+a).val();$("#ppm_qty"+a).val(c);var d=localStorage.productppmStr;(1>eval(c)||0==c)&&$("#ppm_qty"+a).val("");if(""!=c&&0<eval(c)){if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productppmStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(h=h[0],h==b&&(product_index=d.indexOf(a),0==product_index&&(d=d.replace(e[f]+"<rd>",""),
d=d.replace(e[f],"")),0<product_index&&(d=d.replace("<rd>"+e[f],"")),d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c))}localStorage.productppmStr=d}else for(e=localStorage.productppmStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(h=h[0],product_index=d.indexOf(a),h==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productppmStr=d}
function getDocSampleData(){for(var a=localStorage.productSampleStr.split("<rd>"),b=a.length,c='<ul  data-role="listview">',d=0;d<b;d++)if(""!=a[d])var e=a[d].split("<fd>"),g=$("#sample_name"+e[0]).val(),c=c+'<li  style="border-bottom-style:solid; border-color:#CBE4E4;border-bottom-width:thin"><table width="100%" border="0" id="order_tbl" cellpadding="0" cellspacing="0" style="border-radius:5px;"><tr><td >'+g+"("+e[0]+')</td><td width="80px"><input  type="number" id="s_cart_qty'+e[0]+'"  onBlur="sampleCartData_keyup(\''+
e[0]+'\');" value="'+e[1]+'" placeholder="0"></td></tr></table></li>';""!=c&&(c+="</ul>");localStorage.sample_show_1=c;-1==c.indexOf("undefined")&&($("#doc_sample").empty(),$("#doc_sample").append("</br>"+localStorage.sample_show_1+"</br>").trigger("create"));$.mobile.navigate("#page_visit_doc")}
function getDoctorSample(){$("#myerror_doctor_sample").html("");if(void 0==localStorage.productSampleStr||"undefined"==localStorage.productSampleStr)localStorage.productSampleStr="";for(var a=localStorage.productSampleStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>");$("#sample_qty"+d[0]).val(d[1])}$.mobile.navigate("#page_doctor_sample")}
function getSampleData_keyup(a){var b=$("#sample_id"+a).val();$("#sample_name"+a).val();var c=$("#sample_qty"+a).val().replace(".","").substring(0,4);$("#sample_qty"+a).val(c);var d=localStorage.productSampleStr;(1>eval(c)||0==c)&&$("#sample_qty"+a).val("");if(""!=c&&0<eval(c))if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productSampleStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(h=h[0],h==b&&(d=d.replace(e[f],""),d=""==d?
b+"<fd>"+c:d+"<rd>"+h+"<fd>"+c))}else for(e=localStorage.productSampleStr.split("<rd>"),g=orderProductList.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(h=h[0],product_index=d.indexOf(a),h==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>",""),d=d.replace(e[f],"")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productSampleStr=d}
function sampleCartData_keyup(a){var b=$("#sample_id"+a).val();$("#sample_name"+a).val();var c=$("#s_cart_qty"+a).val();$("#sample_qty"+a).val(c);var d=localStorage.productSampleStr;(1>eval(c)||0==c)&&$("#sample_qty"+a).val("");if(""!=c&&0<eval(c)){if(-1==d.indexOf(a))d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c;else for(var e=localStorage.productSampleStr.split("<rd>"),g=e.length,f=0;f<g;f++){var h=e[f].split("<fd>");2==h.length&&(h=h[0],h==b&&(product_index=d.indexOf(a),0==product_index&&(d=d.replace(e[f]+
"<rd>",""),d=d.replace(e[f],"")),0<product_index&&(d=d.replace("<rd>"+e[f],"")),d=""==d?b+"<fd>"+c:d+"<rd>"+b+"<fd>"+c))}localStorage.productSampleStr=d}else for(e=localStorage.productSampleStr.split("<rd>"),g=e.length,f=0;f<g;f++)h=e[f].split("<fd>"),2==h.length&&(h=h[0],product_index=d.indexOf(a),h==b&&(1<g&&(0==product_index&&(d=d.replace(e[f]+"<rd>","")),0<product_index&&(d=d.replace("<rd>"+e[f],""))),1==g&&(d=d.replace(e[f],""))));localStorage.productSampleStr=d}
function visitSubmit_doc(){$("#errorChkVSubmit").text("");visitClientId=localStorage.visit_client.split("|")[1];visit_type=localStorage.visit_type;scheduled_date=localStorage.scheduled_date;sample_doc_Str=localStorage.productSampleStr;gift_doc_Str=localStorage.productGiftStr;campaign_doc_str=localStorage.campaign_doc_str;ppm_doc_Str=localStorage.productppmStr;notes=$("#doc_feedback").val();notes=replace_special_char(notes);if(-1!=campaign_doc_str.indexOf("undefined"))campaign_doc_Str="";else{var a=
campaign_doc_str.split("<rd>"),b=a.length;campaign_submit="";for(var c=0;c<b;c++)campaign_submit=""==campaign_submit?a[c]:campaign_submit+","+a[c]}if(-1!=sample_doc_Str.indexOf("undefined"))sample_doc_Str="";else for(a=sample_doc_Str.split("<rd>"),b=a.length,sample_submit="",c=0;c<b;c++)sample_single=a[c],sample_single_list=sample_single.split("<fd>"),sample_submit=""==sample_submit?sample_single_list[0]+","+sample_single_list[1]:sample_submit+"."+sample_single_list[0]+","+sample_single_list[1];if(-1!=
gift_doc_Str.indexOf("undefined"))gift_submit=gift_doc_Str="";else for(a=gift_doc_Str.split("<rd>"),b=a.length,gift_submit="",c=0;c<b;c++)gift_single=a[c],gift_single_list=gift_single.split("<fd>"),gift_submit=""==gift_submit?gift_single_list[0]+","+gift_single_list[1]:gift_submit+"."+gift_single_list[0]+","+gift_single_list[1];if(-1!=ppm_doc_Str.indexOf("undefined"))ppm_submit=ppm_doc_Str="";else for(a=ppm_doc_Str.split("<rd>"),b=a.length,ppm_submit="",c=0;c<b;c++)ppm_single=a[c],ppm_single_list=
ppm_single.split("<fd>"),ppm_submit=""==ppm_submit?ppm_single_list[0]+","+ppm_single_list[1]:ppm_submit+"."+ppm_single_list[0]+","+ppm_single_list[1];campaign_submit=campaign_submit.replace("undefined","").replace(",.","");gift_submit=gift_submit.replace("undefined","").replace(",.","");sample_submit=sample_submit.replace("undefined","").replace(",.","");notes=notes.replace("undefined","").replace(",.","");ppm_submit=ppm_submit.replace("undefined","").replace(",.","");","==campaign_submit&&(campaign_submit=
"");","==gift_submit&&(gift_submit="");","==sample_submit&&(sample_submit="");","==ppm_submit&&(ppm_submit="");c=campaign_submit+".."+gift_submit+".."+sample_submit+".."+notes+".."+ppm_submit;$("#lscPhoto").val();a=$("#lat").val();b=$("#longitude").val();$.now();var d=$("input[name=v_with]:checked").val();if(""==d||void 0==d||"undefined"==d)$("#errorChkVSubmit_doc").html("Visited with not selected");else if(""==a||0==a||""==b||0==b)$("#errorChkVSubmit_doc").html("Location not Confirmed"),$("#btn_location_doc").show(),
$("#visit_submit_doc").show();else if(""==visitClientId||void 0==visitClientId)$("#errorChkVSubmit_doc").html("Invalid Client");else if(""==visit_type||void 0==visit_type)$("#errorChkVSubmit_doc").html("Invalid Visit Type");else{$("#visit_submit_doc").hide();$("#wait_image_visit_submit_doc").show();var e=localStorage.visit_market_show.split("|")[1];$.ajax({type:"POST",url:localStorage.base_url+"doctor_visit_submit?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+
"&synccode="+localStorage.synccode+"&client_id="+visitClientId+"&visit_type="+visit_type+"&schedule_date="+scheduled_date+"&msg="+c+"&lat="+a+"&long="+b+"&v_with="+d+"&route="+e,success:function(a){if(""==a)$("#errorChkVSubmit").html("Sorry Network not available"),$("#wait_image_visit_submit").hide(),$("#visit_submit").show();else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#errorChkVSubmit").html(a[1]),$("#wait_image_visit_submit").hide(),$("#visit_submit").show();else if("SUCCESS"==a[0]){localStorage.visit_client=
"";localStorage.visit_page="";localStorage.productGiftStr="";localStorage.campaign_doc_str="";localStorage.productSampleStr="";localStorage.productppmStr="";localStorage.campaign_show_1="";localStorage.gift_show_1="";localStorage.sample_show_1="";localStorage.ppm_show_1="";var b=localStorage.productListStr.split("<rd>"),c=b.length;for(a=0;a<c;a++){var d=b[a].split("<fd>")[0];$("#sample_qty"+d).val("");$("#doc_camp"+d).attr("checked",!1)}b=localStorage.gift_string.split("<rd>");c=b.length;for(a=0;a<
c;a++)d=b[a].split("<fd>")[0],$("#gift_qty"+d).val("");b=localStorage.ppm_string.split("<rd>");c=b.length;for(a=0;a<c;a++)d=b[a].split("<fd>")[0],$("#ppm_qty"+d).val("");$("#doc_feedback").val("");$(".visit_client").html("");$("#errorChkVSubmit").html("");$("#lat").val("");$("#longitude").val("");$("#lscPhoto").val("");document.getElementById("myImage").src="";$("#lat_p").val("");$("#long_p").val("");$("#errorChkVSubmit_doc").html("");$("#wait_image_visit_submit_doc").hide();$("#visit_submit_doc").hide();
$("#checkLocation_doc").html("");$("#btn_location_doc").show();$("#visit_success").html("</br></br>Submitted Successfully");localStorage.visit_page="";localStorage.campaign_show_1="";localStorage.gift_show_1="";localStorage.ppm_show_1="";localStorage.sample_show_1="";localStorage.productGiftStr="";localStorage.campaign_doc_str="";localStorage.productSampleStr="";localStorage.productppmStr="";set_doc_all();$(".visit_client").html("");$.mobile.navigate("#page_confirm_visit_success")}else $("#errorChkVSubmit_doc").html("Network Timeout. Please try again."),
$("#wait_image_visit_submit_doc").hide(),$("#visit_submit_doc").show()},error:function(a){$("#errorChkVSubmit").html("Network Timeout. Please try again.");$("#wait_image_visit_submit_doc").hide();$("#visit_submit_doc").show()}})}}
function clear_mgs(){$("#error_login").html("");$("#error_login").html("");$("#err_retailer_date_next").html("");$("#err_retailer_next").html("");$("#err_market_next").html("");$("#errorChkVSubmit").html("");$("#err_market_next_cp").html("");$("#err_m_retailer_next_cp").html("");$("#err_distributor").html("");$("#error_del_submit").html("");$("#err_p_market").html("");$("#err_plan_visit").html("");$("#err_visit_rpt").html("");$("#error_complain").html("");$("#error_complain_page").html("");$("#error_task_page").html("");
$("#error_task_list").html("");$("#err_region_rpt").html("");$("#err_region_rpt").html("");$("#err_region_rpt").html("");$("#err_region_rpt").html("");$("#err_region_rpt").html("");$("#err_m_retailer_next_cp").html("");$("#err_market_next").html("");$("#errorChkVSubmit").html("");$("#product_total_cart").html("");$("#product_total_last").html("")}
function client_catList(){$("#catCombo").empty();for(var a=localStorage.clientCat_string.split("<rd>"),b=$("#catCombo"),c=$("#catCombo_profile"),d=0;d<a.length;d++){var e=a[d];b.prepend("<option value='"+e+"'>"+e+"</option>");c.prepend("<option value='"+e+"'>"+e+"</option>")}b.prepend("<option value=''>All</option>");c.prepend("<option value=''>All</option>");b.prepend("<option value=''>Category</option>");c.prepend("<option value=''>Category</option>")}
function chemist_visit(){$("#ret_cat").show();$("#d_visit").html("Chemist");$("#v_path").html('<font style="font-weight:bold; font-size:13px; color:#666">Visit > Market > Chemist</font>');$("#btn_location").show();$("#visit_submit").hide();$("#checkLocation").html("");localStorage.doctor_flag=0;localStorage.visit_page="NO";addMarketList()}
function chemist_profile(){$("#ret_cat").show();$("#d_visit").html("Chemist");$("#v_path").html('<font style="font-weight:bold; font-size:13px; color:#666">Visit > Market > Chemist</font>');localStorage.doctor_flag=0;addMarketListCp()}function doctor_visit(){$("#ret_cat").hide();$("#d_visit").html("Doctors");$("#v_path").html('<font style="font-weight:bold; font-size:13px; color:#666">Visit > Market > Doctor</font>');localStorage.doctor_flag=1;localStorage.visit_page="NO";addMarketList()}
function doctor_profile(){$("#ret_cat").hide();$("#d_visit").html("Doctors");$("#v_path").html('<font style="font-weight:bold; font-size:13px; color:#666">Visit > Market > Doctor</font>');localStorage.doctor_flag=1;localStorage.visit_page="NO";addMarketListCp()}function feedback(){getComplain();$.mobile.navigate("#page_complain")}
function reports(){"rep"==localStorage.user_type&&(localStorage.str_report='<table width="100%" border="0"><tr><td>Rep: </td><td><input id="se_mpo_doc" name="se_mpo_doc" type="text" readonly="true" placeholder="Rep"><input id="se_item_doc" name="se_item_doc" type="hidden" placeholder="Item"></td></tr><tr><td>Market: </td><td><input id="se_market_doc" name="se_market_doc" type="text" placeholder="Market"  ></td></tr></table>',$("#report").empty(),$("#report").append(localStorage.str_report).trigger("create"),
$("#se_mpo_doc").val(localStorage.user_id));"sup"==localStorage.user_type&&(localStorage.str_report='<table width="100%" border="0"><tr><td>Rep: </td><td><input id="se_mpo_doc" name="se_mpo_doc" type="text" placeholder="Rep"><input id="se_item_doc" name="se_item_doc" type="hidden" placeholder="Item"></td></tr>\t<tr><td>Market: </td><td><input id="se_market_doc" name="se_market_doc" type="text" placeholder="Market/level"  ></td></tr></table>',$("#report").empty(),$("#report").append(localStorage.str_report).trigger("create"),
$("#se_mpo_doc").val(localStorage.user_id));$.mobile.navigate("#page_reports_dcr")}
function market_list_combo(){$("#se_market").empty();$("#se_market_doc").empty();for(var a=localStorage.marketListStr.split("<rd>"),b=$("#se_market"),c=$("#se_market_doc"),d=0;d<a.length;d++){market_single=a[d].split("<fd>");var e=market_single[0],g=market_single[1];b.prepend("<option value='"+e+"'>"+g+"-"+e+"</option>");c.prepend("<option value='"+e+"'>"+g+"-"+e+"</option>")}b.prepend("<option value=''>Market</option>");c.prepend("<option value=''>Market</option>")}
function item_list_combo(){$("#se_item").empty();for(var a=localStorage.productListStr.split("<rd>"),b=$("#se_item"),c=0;c<a.length;c++){product_single=a[c].split("<fd>");var d=product_single[0];b.prepend("<option value='"+d+"'>"+product_single[1]+"-"+d+"</option>")}b.prepend("<option value=''>Item</option>")}function mpo_list_combo(){$("#se_mpo").empty();var a=$("#se_mpo");"rep"==localStorage.user_type&&a.prepend("<option value='"+localStorage.user_id+"'>"+localStorage.user_id+"</option>")}
$(document).on("pagecreate","#page_order",function(){$("#item_combo_id_lv").filterable("option","filterCallback",startsWithSearch)});function startsWithSearch(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase(),e=$(this).data("filtertext")||"",e=e.toUpperCase();0!=d.lastIndexOf(b.toUpperCase(),0)&&0!=e.lastIndexOf(b.toUpperCase(),0)&&(c=!0)}return c}$(document).on("pagecreate","#page_doctor_gift",function(){$("#gift_combo_id_lv").filterable("option","filterCallback",startsWithSearch_gift)});
function startsWithSearch_gift(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase(),e=$(this).data("filtertext")||"",e=e.toUpperCase();0!=d.lastIndexOf(b.toUpperCase(),0)&&0!=e.lastIndexOf(b.toUpperCase(),0)&&(c=!0)}return c}$(document).on("pagecreate","#page_doctor_ppm",function(){$("#ppm_combo_id_lv").filterable("option","filterCallback",startsWithSearch_ppm)});
function startsWithSearch_ppm(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase(),e=$(this).data("filtertext")||"",e=e.toUpperCase();0!=d.lastIndexOf(b.toUpperCase(),0)&&0!=e.lastIndexOf(b.toUpperCase(),0)&&(c=!0)}return c}$(document).on("pagecreate","#page_doctor_sample",function(){$("#sample_combo_id_lv").filterable("option","filterCallback",startsWithSearch_sample)});
function startsWithSearch_sample(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase(),e=$(this).data("filtertext")||"",e=e.toUpperCase();0!=d.lastIndexOf(b.toUpperCase(),0)&&0!=e.lastIndexOf(b.toUpperCase(),0)&&(c=!0)}return c}$(document).on("pagecreate","#page_doctor_campaign",function(){$("#campaign_combo_id_lv").filterable("option","filterCallback",startsWithSearch_campaign)});
function startsWithSearch_campaign(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase(),e=$(this).data("filtertext")||"",e=e.toUpperCase();0!=d.lastIndexOf(b.toUpperCase(),0)&&0!=e.lastIndexOf(b.toUpperCase(),0)&&(c=!0)}return c}$(document).on("pagecreate","#page_market",function(){$("#unschedule_market_combo_id_lv").filterable("option","filterCallback",startsWithSearch_market)});
function startsWithSearch_market(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase();($(this).data("filtertext")||"").toUpperCase();5!=d.indexOf(b.toUpperCase(),0)&&(c=!0)}return c}$(document).on("pagecreate","#page_market_ret",function(){$("#unscheduled_m_client_combo_id_lv").filterable("option","filterCallback",startsWithSearch_ret)});
function startsWithSearch_ret(a,b){var c=!1;if(b&&0<b.length){var d=$(this).text().toUpperCase();($(this).data("filtertext")||"").toUpperCase();5!=d.indexOf(b.toUpperCase(),0)&&(c=!0)}return c}
$(document).ready(function(){$("#menu_show").empty();$("#menu_show").append(localStorage.menu_list).trigger("create");$("#wait_image_login").hide();$("#loginButton").show();$("#wait_image_schedule_date").hide();$("#btn_schedule_date").show();$("#wait_image_schedule_ret").hide();$("#btn_schedule_ret").show();$("#wait_image_unschedule_market").hide();$("#btn_unschedule_market").show();$("#wait_image_ret").hide();$("#wait_image_unschedule_market_ret").hide();$("#btn_unschedule_market_ret").show();$("#wait_image_visit_submit").hide();
$("#visit_submit").show();$("#wait_image_delivery_submit").hide();$("#btn_delivery_submit").show();$("#wait_image_delivery_dealer").hide();$("#btn_delivery_dealer").show();$("#wait_image_profile_market").hide();$("#btn_profile_market").show();$("#wait_image_profile_market_ret").hide();$("#btn_profile_market_ret").show();$("#wait_image_profile_update").hide();$("#btn_profile_update").show();$("#wait_image_visit_plan_market").hide();$("#btn_visit_plan_market").show();$("#wait_image_visit_plan_submit").hide();
$("#btn_visit_plan_submit").show();$("#wait_image_visit_report").hide();$("#wait_image_complain_submit").hide();$("#btn_complain_submit").show();$("#wait_image_region_report").hide();$("#btn_location_doc").show();$("#visit_submit_doc").hide();$("#checkLocation_doc").html("");$("#wait_image_visit_submit_doc").hide("");$("#visit_submit").hide();client_catList();first_page();market_list_combo();item_list_combo();mpo_list_combo();$("#se_mpo").val(localStorage.user_id);$("#product_list_tbl").html(localStorage.product_tbl_str);
$("#del_product_list_tbl").html(localStorage.product_tbl_del_str);$("#sch_date").val(localStorage.search_date);$("#order_report_button").empty();$("#order_report_button").append(localStorage.report_button).trigger("create");$("#doctor_report_button").empty();$("#doctor_report_button").append(localStorage.doctor_report_button).trigger("create");$("#doctor_campaign_list_tbl").html(localStorage.product_tbl_str_doc_campaign);$("#doctor_sample_list_tbl").html(localStorage.product_tbl_str_doc_sample);$("#doctor_gift_list_tbl").html(localStorage.gift_tbl_doc);
$("#doctor_ppm_list_tbl").html(localStorage.ppm_tbl_doc);$("#product_total_cart").html(localStorage.show_total);$("#product_total_last").html(localStorage.show_total);jQuery("#delivery_retailer_cmb_id").change(function(){for(var a=localStorage.productListStr.split("<rd>"),b=a.length,c=0;c<b;c++){var d=a[c].split("<fd>")[0];jQuery("#delivery_qty"+d).val("")}});$("#desc").val(localStorage.map_desc);$("#c_point").val(localStorage.c_point);1==localStorage.doctor_flag&&"YES"==localStorage.visit_page&&
(campaign_show_1=localStorage.campaign_show_1,gift_show_1=localStorage.gift_show_1,sample_show_1=localStorage.sample_show_1,ppm_show_1=localStorage.ppm_show_1,0<campaign_show_1.length&-1==campaign_show_1.indexOf("undefined")&&$("#doc_campaign").html("</br>"+localStorage.campaign_show_1+"</br>"),0<gift_show_1.length&-1==gift_show_1.indexOf("undefined")&&$("#doc_gift").html("</br>"+localStorage.gift_show_1+"</br>"),0<ppm_show_1.length&-1==ppm_show_1.indexOf("undefined")&&$("#doc_ppm").html("</br>"+
localStorage.ppm_show_1+"</br>"),0<sample_show_1.length&-1==sample_show_1.indexOf("undefined")&&$("#doc_sample").html("</br>"+localStorage.sample_show_1+"</br>"),$(".market").html(localStorage.visit_market_show),$(".visit_client").html(localStorage.visit_client_show));0==localStorage.doctor_flag&&"YES"==localStorage.visit_page&&($("#sch_date").val(localStorage.scheduled_date),$(".market").html(localStorage.visit_market_show),$(".visit_distributor").html(localStorage.visit_distributor_nameid),$(".visit_type").html(localStorage.visit_type),
$(".s_date").html(localStorage.scheduled_date),$(".visit_client").html(localStorage.visit_client_show),mobile_off_flag=1,getOrder_load())});
$.mobile.document.on("listviewcreate","#schedule_client_combo_id-menu",function(a){var b,c=$("#schedule_client_combo_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#schedule_client_combo_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#schedule_client_combo_id-dialog",function(a){var b=$("#schedule_client_combo_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#schedule_client_combo_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#unschedule_market_combo_id-menu",function(a){var b,c=$("#unschedule_market_combo_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#unschedule_market_combo_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#unschedule_market_combo_id-dialog",function(a){var b=$("#unschedule_market_combo_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#unschedule_market_combo_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#unscheduled_m_client_combo_id-menu",function(a){var b,c=$("#unscheduled_m_client_combo_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#unscheduled_m_client_combo_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#unscheduled_m_client_combo_id-dialog",function(a){var b=$("#unscheduled_m_client_combo_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#unscheduled_m_client_combo_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#delivery_distributor_cmb_id-menu",function(a){var b,c=$("#delivery_distributor_cmb_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#delivery_distributor_cmb_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#delivery_distributor_cmb_id-dialog",function(a){var b=$("#delivery_distributor_cmb_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#delivery_distributor_cmb_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#delivery_retailer_cmb_id-menu",function(a){var b,c=$("#delivery_retailer_cmb_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#delivery_retailer_cmb_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#delivery_retailer_cmb_id-dialog",function(a){var b=$("#delivery_retailer_cmb_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#delivery_retailer_cmb_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#visit_market_cmb_id-menu",function(a){var b,c=$("#visit_market_cmb_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#visit_market_cmb_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#visit_market_cmb_id-dialog",function(a){var b=$("#visit_market_cmb_id-listbox").jqmData("filter-form"),c="pagebeforeshow"===
a.type;a=c?$(a.target).find(".ui-content"):$("#visit_market_cmb_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#visit_plan_client_cmb_id-menu",function(a){var b,c=$("#visit_plan_client_cmb_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#visit_plan_client_cmb_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#visit_plan_client_cmb_id-dialog",function(a){var b=$("#visit_plan_client_cmb_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#visit_plan_client_cmb_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#marchandizing_item_id-menu",function(a){var b,c=$("#marchandizing_item_id-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='clientSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#marchandizing_item_id-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#marchandizing_item_id-dialog",function(a){var b=$("#marchandizing_item_id-listbox").jqmData("filter-form"),
c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):$("#marchandizing_item_id-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#se_market-menu",function(a){var b,c=$("#se_market-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='marketSearch' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#se_market-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#se_market-dialog",function(a){var b=$("#se_market-listbox").jqmData("filter-form"),c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):
$("#se_market-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#se_market_doc-menu",function(a){var b,c=$("#se_market_doc-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='marketSearch_doc' data-type='search'></input>"),c=$("<form></form>").append(b),b.textinput(),$("#se_market_doc-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#se_market_doc-dialog",function(a){var b=$("#se_market_doc-listbox").jqmData("filter-form"),c="pagebeforeshow"===a.type;a=
c?$(a.target).find(".ui-content"):$("#se_market_doc-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
$.mobile.document.on("listviewcreate","#se_item-menu",function(a){var b,c=$("#se_item-listbox").jqmData("filter-form");a=$(a.target);c||(b=$("<input id='itemSearch' data-type='search'></input></br>"),c=$("<form></form>").append(b),b.textinput(),$("#se_item-listbox").prepend(c).jqmData("filter-form",c));a.filterable({input:b})}).on("pagebeforeshow pagehide","#se_item-dialog",function(a){var b=$("#se_item-listbox").jqmData("filter-form"),c="pagebeforeshow"===a.type;a=c?$(a.target).find(".ui-content"):
$("#se_item-listbox");b.find("input").textinput("option","inset",!c).end().prependTo(a)});
function set_report_parameter(){var a=$("#date_from").val(),b=$("#date_to").val(),c=$("#se_mpo").val(),d=$("#se_item ").val(),e=$("#se_market ").val();""==e&&(e="All");""==d&&(d="All");date_from_show=0==a.length?"Today":a;date_to_show=0==b.length?"Today":b;localStorage.date_from=a;localStorage.date_to=b;localStorage.rep_id_report=c;localStorage.se_item_report=d;localStorage.se_market_report=e;$("#report_market").html("Market :"+localStorage.se_market_report);$("#report_item").html("Item :"+localStorage.se_item_report);
$("#report_mpo").html("MPO :"+localStorage.rep_id_report);$("#date_f").html("DateFrom :"+date_from_show);$("#date_t").html("DateTo :"+date_to_show)}
function s_order_summary_report(){set_report_parameter_doctor();$("#sales_call").html("");$("#order_count").html("");$("#order_value").html("");$("#rep_detail").html("");$.ajax({type:"POST",url:localStorage.base_url+"s_call_order_summary?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&rep_id_report="+localStorage.rep_id_report_doc+"&se_item_report="+localStorage.se_item_report_doc+"&se_market_report="+localStorage.se_market_report_doc+
"&date_from="+localStorage.date_from_doc+"&date_to="+localStorage.date_to_doc+"&user_type="+localStorage.user_type,success:function(a){if(""==a)$("#myerror_s_report").html("Sorry Network not available");else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#myerror_s_report").html(a[1]);else if("SUCCESS"==a[0]){var b=a[1].split("<rd>");a=b[0];var c=b[1],b=b[2];$("#err_retailer_date_next").text("");$("#report_header").text("Sales Call and Order Count");$("#sales_call").html("<font style='font-size:15px; color:#666'>Sales Call:</div>"+
a);$("#order_count").html("<font style='font-size:15px; color:#666'>Order Count:</div>"+c);$("#order_value").html("<font style='font-size:15px; color:#666'>Order Value:</div>"+b);$("#rep_detail").html("")}else $("#err_retailer_date_next").html("Network Timeout. Please try again.")},error:function(a){$("#wait_image_schedule_date").hide()}});$.mobile.navigate("#page_sc_order_summary_report")}
function s_order_detail_report(){set_report_parameter_doctor();localStorage.date_to_doc=localStorage.date_from_doc;$("#date_f").html("Date :"+date_from_show_doc);$("#date_t").html("");$("#sales_call").html("");$("#order_count").html("");$("#order_value").html("");$("#rep_detail").html("");$.ajax({type:"POST",url:localStorage.base_url+"s_call_order_detail?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&rep_id_report="+
localStorage.rep_id_report_doc+"&se_item_report="+localStorage.se_item_report_doc+"&se_market_report="+localStorage.se_market_report_doc+"&date_from="+localStorage.date_from_doc+"&date_to="+localStorage.date_to_doc+"&user_type="+localStorage.user_type,success:function(a){if(""==a)$("#myerror_s_report").html("Sorry Network not available");else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#myerror_s_report").html(a[1]);else if("SUCCESS"==a[0]){var b=a[1].split("<rd>");a=b[0];var c=b[1],d=b[2],b=b[3];
$("#err_retailer_date_next").text("");$("#report_header").text("Sales Call and Order Detail");$("#sales_call").html("<font style='font-size:15px; color:#666'>Sales Call:</font>"+a);$("#order_count").html("<font style='font-size:15px; color:#666'>Order Count:</font>"+c);$("#order_value").html("<font style='font-size:15px; color:#666'>Order Value:</font>"+d);$("#rep_detail").html("<font style='font-size:9px;'>"+b+"</font>")}else $("#err_retailer_date_next").html("Network Timeout. Please try again.")},
error:function(a){$("#wait_image_schedule_date").hide()}});$.mobile.navigate("#page_sc_order_summary_report")}
function set_report_parameter_doctor(){var a=$("#date_from_doc").val(),b=$("#date_to_doc").val(),c=$("#se_mpo_doc").val(),d=$("#se_item_doc").val(),e=$("#se_market_doc").val();""==e&&(e="All");se_item_report="All";date_from_show_doc=0==a.length?"Today":a;date_to_show_doc=0==b.length?"Today":b;0==c.length&&(c=localStorage.user_id);localStorage.date_from_doc=a;localStorage.date_to_doc=b;localStorage.rep_id_report_doc=c;localStorage.se_item_report_doc=d;localStorage.se_market_report_doc=e;$("#report_market_doctor").html("Market :"+
localStorage.se_market_report_doc);$("#report_mpo_doctor").html("MPO :"+localStorage.rep_id_report_doc);$("#date_f_doctor").html("DateFrom :"+date_from_show_doc);$("#date_t_doctor").html("DateTo :"+date_to_show_doc);$("#report_market").html("Market :"+localStorage.se_market_report_doc);$("#report_mpo").html("MPO :"+localStorage.rep_id_report_doc);$("#date_f").html("DateFrom :"+date_from_show_doc);$("#date_t").html("DateTo :"+date_to_show_doc)}
function summary_report_doctor(){set_report_parameter_doctor();$("#visit_count_doctor").html("");$("#visit_withAtt_doctor").html("");$("#visit_withoutAtt_doctor").html("");$("#rep_detail_doctor").html("");$.ajax({type:"POST",url:localStorage.base_url+"report_summary_doctor?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+localStorage.synccode+"&rep_id_report="+localStorage.rep_id_report_doc+"&se_item_report="+localStorage.se_item_report_doc+"&se_market_report="+
localStorage.se_market_report_doc+"&date_from="+localStorage.date_from_doc+"&date_to="+localStorage.date_to_doc+"&user_type="+localStorage.user_type,success:function(a){if(""==a)$("#myerror_s_report").html("Sorry Network not available");else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#myerror_s_report").html(a[1]);else if("SUCCESS"==a[0]){var b=a[1].split("<rd>");a=b[0];var c=b[1],b=b[2];$("#err_retailer_date_next").text("");$("#report_header_doc").text("DCR Count");$("#visit_count_doctor").html("<font style='font-size:15px; color:#666'>visit Count:"+
a+"</font>");$("#visit_withAtt_doctor").html("<font style='font-size:15px; color:#666'>"+c+"</font>");$("#visit_withoutAtt_doctor").html("<font style='font-size:15px; color:#666'>"+b+"</font>")}else $("#err_retailer_date_next").html("Network Timeout. Please try again.")},error:function(a){$("#err_retailer_date_next").html("Network Timeout. Please try again.")}});$.mobile.navigate("#page_report_doctor")}
function detail_report_doctor(){set_report_parameter_doctor();localStorage.date_to_doc=localStorage.date_from_doc;$("#date_f_doctor").html("Date :"+date_from_show_doc);$("#date_t_doctor").html("");$("#visit_count_doctor").html("");$("#visit_withAtt_doctor").html("");$("#visit_withoutAtt_doctor").html("");$("#rep_detail_doctor").html("");$.ajax({type:"POST",url:localStorage.base_url+"report_detail_doctor?cid="+localStorage.cid+"&rep_id="+localStorage.user_id+"&rep_pass="+localStorage.user_pass+"&synccode="+
localStorage.synccode+"&rep_id_report="+localStorage.rep_id_report_doc+"&se_item_report="+localStorage.se_item_report_doc+"&se_market_report="+localStorage.se_market_report_doc+"&date_from="+localStorage.date_from_doc+"&date_to="+localStorage.date_to_doc+"&user_type="+localStorage.user_type,success:function(a){if(""==a)$("#myerror_s_report").html("Sorry Network not available");else if(a=a.split("<SYNCDATA>"),"FAILED"==a[0])$("#myerror_s_report").html(a[1]);else if("SUCCESS"==a[0]){var b=a[1].split("<rd>");
a=b[0];var c=b[1],d=b[2],b=b[3];$("#err_retailer_date_next").text("");$("#report_header_doc").text("DCR Detail");$("#visit_count_doctor").html("visit Count:"+a);"sup"==localStorage.user_type&&($("#visit_withAtt_doctor").html(c),$("#visit_withoutAtt_doctor").html(d));$("#rep_detail_doctor").html("<div width='70%'>"+b+"</div>")}else $("#err_retailer_date_next").html("Network Timeout. Please try again.")},error:function(a){$("#err_retailer_date_next").html("Network Timeout. Please try again.")}});$.mobile.navigate("#page_report_doctor")}
;function hello(a){alert("Hello, "+a)}hello("New user");